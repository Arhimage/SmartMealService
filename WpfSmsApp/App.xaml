<Application x:Class="WpfSmsApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:WpfSmsApp"
             StartupUri="MainWindow.xaml">
    <Application.Resources>

        <Style x:Key="WindowButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#555555"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="CloseButtonStyle" TargetType="Button" BasedOn="{StaticResource WindowButtonStyle}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E81123"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="Window" x:Key="CustomWindowStyle">
            <Setter Property="WindowChrome.WindowChrome">
                <Setter.Value>
                    <WindowChrome 
                    CaptionHeight="20"
                    ResizeBorderThickness="14"
                    CornerRadius="70"
                    GlassFrameThickness="0"/>
                </Setter.Value>
            </Setter>
            <Setter Property="MinHeight" Value="200"/>
            <Setter Property="MinWidth" Value="300"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Window">
                        <Border Background="White" BorderBrush="Transparent" BorderThickness="1" CornerRadius="35">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="50"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <Border Grid.Row="0" Background="Transparent">
                                    <Grid>
                                        <TextBlock Text="{TemplateBinding Title}"
                                               Foreground="Black"
                                               FontSize="17"
                                               FontWeight="Medium"
                                               VerticalAlignment="Center"
                                               Margin="20,0"/>

                                        <StackPanel Orientation="Horizontal" 
                                                HorizontalAlignment="Right">
                                            <Button Content="━" FontSize="20" FontWeight="Bold" Foreground="Black" Width="60" Height="50" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                    WindowChrome.IsHitTestVisibleInChrome="True"
                                                    Click="MinimizeClick"
                                                    Style="{StaticResource WindowButtonStyle}"/>

                                            <Button Width="60" Height="50"
                                                    WindowChrome.IsHitTestVisibleInChrome="True"
                                                    Click="CloseClick"
                                                    Style="{StaticResource CloseButtonStyle}">
                                                <TextBlock Text="✚" FontSize="30" FontWeight="Bold" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                    <TextBlock.RenderTransform>
                                                        <RotateTransform Angle="45"/>
                                                    </TextBlock.RenderTransform>
                                                    <TextBlock.RenderTransformOrigin>
                                                        <Point X="0.5" Y="0.5"/>
                                                    </TextBlock.RenderTransformOrigin>
                                                </TextBlock>
                                            </Button>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <AdornerDecorator Grid.Row="1">
                                    <ContentPresenter/>
                                </AdornerDecorator>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Application.Resources>
</Application>
